<%- include("partials/header", {activity: 'Workflow Execution Fundamentals'}); %>

<%- include("partials/inputs"); %>

<%- include("partials/simulation_parameters_form_start"); %>

    <div class="form-group">
      <label for="compute_speed">Compute speed of hpc.edu in GFlop/sec</label>
      <input type="number" class="form-control" id="compute-speed" placeholder="1000" value="1000" min="1" max="100000" step="1" required>
      <div class="invalid-feedback">
        Please provide a compute speed in the range [1, 9999]
      </div>
    </div>

<%- include("partials/simulation_parameters_form_end"); %>

<%- include("partials/simulation_output"); %>

<%- include("partials/workflow_execution_graph"); %>

<%- include("partials/workflow_execution_data"); %>

<script src="scripts/workflow_execution_fundamentals.js" type="text/javascript"></script>

<script>
    // Setup zoom for the platform svg and center it
    let svg = d3.select("#cyberinfrastructure");
    let height = svg.attr("height").slice(0, -2);

    let inner = svg.select("g");

    // Set up zoom support
    let zoom = d3.zoom().on("zoom", function() {
        inner.attr("transform", d3.event.transform);
    });
    svg.call(zoom);

    // Center the graph
    let initialScale = 0.6;
    svg.call(zoom.transform,
        d3.zoomIdentity.translate(20,50).scale(initialScale));


    svg.attr('height', height);
</script>

<%- include("partials/footer"); %>
